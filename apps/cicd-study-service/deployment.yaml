apiVersion: apps/v1
kind: Deployment
metadata:
  name: cicd-study-service
  namespace: cicd
spec:
  replicas: 5
  selector:
    matchLabels:
      app: cicd-study-service
  template:
    metadata:
      labels:
        app: cicd-study-service
    spec:
      containers:
        - name: app
          image: $(aws sts get-caller-identity --query Account --output text).dkr.ecr.ap-northeast-1.amazonaws.com/ghcr.io/wuyang026/cicd-study-service:3da7da00dd6491d27dd6978919b0683f4e4bfcb0
          ports:
            - containerPort: 8080
