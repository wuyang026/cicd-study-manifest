apiVersion: apps/v1
kind: Deployment
metadata:
  name: cicd-study-service
  namespace: cicd
spec:
  replicas: 5
  selector:
    matchLabels:
      app: cicd-study-service
  template:
    metadata:
      labels:
        app: cicd-study-service
    spec:
      containers:
        - name: app
          image: $(aws sts get-caller-identity --query Account --output text).dkr.ecr.ap-northeast-1.amazonaws.com/ghcr.io/wuyang026/cicd-study-service:a6f5b3ae9813621d004ee54f23faefd88d357f92
          ports:
            - containerPort: 8080
